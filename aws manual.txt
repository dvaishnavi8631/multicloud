1. Check Permissions of the Config File

Ensure the Kubernetes configuration file has the appropriate permissions for the user running the command:

ls -l /var/lib/jenkins/.kube/config

Fix Permissions

If the file is not accessible to the user, update the file permissions:

sudo chmod 600 /var/lib/jenkins/.kube/config
sudo chown jenkins:jenkins /var/lib/jenkins/.kube/config

This sets the file to be readable and writable only by the jenkins user, which is typically the one running Jenkins.
2. Switch to the Correct User

If you're running this command as a different user (e.g., ec2-user), ensure you're either switching to the Jenkins user or using the correct Kubernetes configuration file for the ec2-user.
Option 1: Switch to Jenkins User

sudo su - jenkins

Option 2: Use an Alternate Config File

If you intend to run the command as ec2-user, specify a separate Kubernetes config:

export KUBECONFIG=/home/ec2-user/.kube/config